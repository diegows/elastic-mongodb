
{% set configdbs = [] %}
{% if grains.get("shard_mongos", False) %}
  {% for minion, grains in salt['mine.get']('*', 'grains.item').items() %}
    {% if grains.get("shard_configsvr", False) %}
      {% do configdbs.append(minion + ":27019") %}
    {% endif %}
  {% endfor %}
{% endif %}
{% set configdbs = ",".join(configdbs) %}

configdb={{ configdbs }}
logpath=/var/log/mongodb/mongos.log
logappend=true
port=27020
